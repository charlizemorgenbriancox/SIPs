---
sip: 302
title: Pools (V3)
network: Ethereum & Optimism
status: Implemented
type: Governance
author: 'Afif Bandak (@aband1), Kain Warwick (@kaiynne), Noah Litvin (@noahlitvin)'
implementor: 'Daniel Beal (@dbeal-eth), Leonardo Massazza (@leomassazza), Alejandro Santander (@ajsantander)'
proposal: >-
  https://snapshot.org/#/snxgov.eth/proposal/0x325cbc11fe3d7047f4d8c937b5a7af4ba098696b1dca03a91ce5c0f279ae02fe
created: 2022-05-03
---

<!--You can leave these HTML comments in your merged SIP and delete the visible duplicate text guides, they will not appear and may be helpful to refer to if you edit it again. This is the suggested template for new SIPs. Note that an SIP number will be assigned by an editor. When opening a pull request to submit your SIP, please use an abbreviated title in the filename, `sip-draft_title_abbrev.md`. The title should be 44 characters or less.-->

## Simple Summary

<!--"If you can't explain it simply, you don't understand it well enough." Simply describe the outcome the proposed changes intends to achieve. This should be non-technical and accessible to a casual community member.-->

This SIP proposes the creation of pools in Version 3 of the Synthetix protocol. Pools accept collateral in vaults, enable the creation of collateralized debt positions, and delegate credit to markets.

## Abstract

<!--A short (~200 word) description of the proposed change, the abstract should clearly describe the proposed change. This is what *will* be done if the SIP is implemented, not *why* it should be done or *how* it will be done. If the SIP proposes deploying a new contract, write, "we propose to deploy a new contract that will do x".-->

Governance determines the types of collateral that can be deposited in the system. Accounts can delegate their staked collateral to pools by opening staking positions. Accounts can then mint and burn snxUSD, backed by their collateral. Optionally, the owner of a pool can delegate credit to markets and assume credit and debt generated by these markets.

## Motivation

<!--This is the problem statement. This is the *why* of the SIP. It should clearly explain *why* the current state of the protocol is inadequate.  It is critical that you explain *why* the change is needed, if the SIP proposes changing how something is calculated, you must address *why* the current calculation is innaccurate or wrong. This is not the place to describe how the SIP will address the issue!-->

By introducing the concept of a pool, we are able to allow stakers to have custom exposure to specific markets' performance. This enables the benefits of a differentiated debt pool, as discussed in _[SIP-300](https://sips.synthetix.io/sips/sip-300/)_)

## Specification

<!--The specification should describe the syntax and semantics of any new feature, there are five sections
1. Overview
2. Rationale
3. Technical Specification
4. Test Cases
5. Configurable Values
-->

### Overview

<!--This is a high level overview of *how* the SIP will solve the problem. The overview should clearly describe how the new feature will be implemented.-->

The implementation of pools involves logic for vaults of collateral, stablecoin issuance, and the delegation of credit and debt from markets.

### Rationale

<!--This is where you explain the reasoning behind how you propose to solve the problem. Why did you propose to implement the change in this way, what were the considerations and trade-offs. The rationale fleshes out what motivated the design and why particular design decisions were made. It should describe alternate designs that were considered and related work. The rationale may also provide evidence of consensus within the community, and should discuss important objections or concerns raised during discussion.-->

Pools create a clean abstraction for provisioning liquidity between vaults of collateral and markets. An alternative approach could involve a module for managing all collateral in the system, another module to manage minting and burning snxUSD, and then developing a system to that allows accounts to provide liquidity directly to markets. This is not desirable because it adds unnecessary components to the system and significantly increases the implementation complexity of features like delegated staking positions.

It may seem as if we could allow pools to decide which types of collateral are acceptable, rather than configuring this across the entire protocol. This is not an option because we want to allow snxUSD to be fungible (regardless of the pool from which it was minted). In other words, we need to prevent the creation of a pool that accepts low quality collateral, exposing all snxUSD holders to that risk.

### Technical Specification

<!--The technical specification should outline the public API of the changes proposed. That is, changes to any of the interfaces Synthetix currently exposes or the creations of new ones.-->

We can develop this system in a series of modules:

**Collateral Module**
This module manages all collateral held in the protocol. With an account, users can `depositCollateral()` and `withdrawCollateral()` via this interface. The TVL of the protocol will consist of the value of all tokens held at the core proxy address. The SCCP-configurable values pertaining to accepted collateral types are also managed in this module. (See _Configurable Values_ below.)

**Vault Module**
vaults of each collateral type per pool
Each pool Think of this like a CDP (MakerDAO, Liquity). Deposited collateral can be delegated to vaults, and then snxUSD can be minted against it, creating a staking position.

mint and burn

delegateCollateral

**Pool Module**
Users can create pools and configure settings relating to the markets they are backing (if any) using this module. Pools are created with the `createPool()` function, specifying an owner. Ownership can be transferred with the nominate/accept pattern or renounced. The pool owner can specify the following configuration for each market with the `setPoolConfiguration()` function:

- _Weights_ - This value determines what proportion of the liquidity in a particular pool should be allocated to this market. The proportion of weight assigned to a market (relative to the total weights assigned by this pool) determines what proportion of credit delegated to this market can be utilized by this market.
- _Maximum Debt per Dollar of Collateral_ - This value determines the maximum amount of debt the pool is willing to assume for this market relative to the amount of credit being delegated towards it. For example, if a pool holds $1,000 of collateral, half of its weight is delegated to a given market, and it's maximum debt per dollar of collateral for this market is $0.75, then the market could attribute a maximum of $375 debt to this pool.

The module also manages an SCCP-configurable _Minimum Liquidity Ratio_. If this ratio (taken with the proportion of delegated credit from the pool) results in a lower maximum debt than the calculation involving the maximum debt per dollar of collateral, it is used to determine the maximum debt instead. We envision this value being set at least has high as the most conservative target c-ratio.

The maximum debt for a given market, aggregated across all pools backing it, is also the maximum amount of snxUSD that a market is able to withdraw.

**Pool Configuration Module**
This manages a list of SCCP-configurable approved pools and a preferred pool.

### Test Cases

<!--Test cases for an implementation are mandatory for SIPs but can be included with the implementation..-->

Relevant tests will be developed during implementation.

### Configurable Values (Via SCCP)

<!--Please list all values configurable via SCCP under this implementation.-->

For each collateral type

- Token (_address_) - An ERC-20 contract that represents the collateral.
- Price Feed (_address_) - A contract which provides the current value of this asset, denominated in USD.
- Issuance Ratio (_uint_) - The lowest collateralization ratio that the protocol allows stakers to reach voluntarily with this collateral type (by minting snxUSD, for example).
- Disabled (_bool_) - Whether the protocol should accept any more collateral of this type from stakers.

- Preferred Pool (_uint_) - This is the ID of a pool which the Spartan Council prefers that stakers join. This will be the default pool for stakers in the official UI.
- Approved Pools (_uint[]_) - This is a list of poolsâ€™ IDs owned (or otherwise approved) by the Spartan Council and will be listed in the official UI.
- Minimum Liquidity Ratio - This is... (See **Pool Module** above.)

## Copyright

Copyright and related rights waived via [CC0](https://creativecommons.org/publicdomain/zero/1.0/).
